2016-09-28 14:16:55	-->	alyptik (~alyptik@unaffiliated/alyptik) has joined #openvpn
2016-09-28 14:16:55		[14:16]
2016-09-28 14:16:55	--	Topic for #openvpn is "openvpn: OpenVPN Community Support Channel || PLEASE read entire topic || Current Release: 2.3.12 (23 Aug 2016) || First time? Use !welcome and !goal || Access-Server? /join #openvpn-as || Your problem is probably firewall. Really || TAP/bridging is almost always a bad idea || Vulninfo: !heartbleed !poodle !ovpnuke !sweet32 || Patience is a virtue"
2016-09-28 14:16:55	--	Topic set by danhunsaker (sid145261@openvpn/corp/danhunsaker) on Fri, 23 Sep 2016 09:00:56
2016-09-28 14:16:56	--	Channel #openvpn: 218 nicks (7 ops, 2 voices, 209 normals)
2016-09-28 14:16:57	--	Channel created on Sat, 25 Nov 2006 20:42:40
2016-09-28 14:18:51	wallbroken	danhunsaker, i also tried removing "route 192.168.1.0 255.255.255.0"
2016-09-28 14:18:54	wallbroken	but no luck
2016-09-28 14:19:09	@danhunsaker	That would indicate another issue, yes.
2016-09-28 14:20:01	<--	xamindar (~quassel@71-91-164-206.dhcp.gwnt.ga.charter.com) has quit (Remote host closed the connection)
2016-09-28 14:20:19	wallbroken	nobody knows the possible reasons?
2016-09-28 14:21:16	@danhunsaker	Those who do don't monitor the channel every second, so it might be a while before you get a response.
2016-09-28 14:21:52	@danhunsaker	As I'm sure you've already seen from experience.
2016-09-28 14:22:47	@danhunsaker	I get paid to hang out in here, but even I don't get paid to monitor the channel and respond immediately.
2016-09-28 14:23:06	@danhunsaker	Also, business hours are over, here, so even then I'm only here by choice.
2016-09-28 14:25:39	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 14:25:54	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 14:31:00		[14:25]
2016-09-28 14:35:17	wallbroken	danhunsaker, i fixed 1 problem
2016-09-28 14:35:25	wallbroken	now i can ping 10.0.0.0
2016-09-28 14:35:54	@danhunsaker	OK.  You don't have to mention me if we're the only ones talking, by the way.
2016-09-28 14:36:05	@danhunsaker	:D
2016-09-28 14:36:34	wallbroken	oh sorry, i don't want to be boring, so, nevermind
2016-09-28 14:41:26	dcarmich	@danhunsaker: I've just updated my personal FreeBSD server from 10.3-RELEASE to 11.0-RELEASE, and every other service on it works fine other than my OpenVPN. The VPN connection is properly established from the endpoint to the server, but no traffic passes out of the server from the VPN client. Would it be best to ask on the FreeBSD forums?
2016-09-28 14:42:10	@danhunsaker	Sounds like either firewall or routing to me.
2016-09-28 14:42:42	@danhunsaker	But others may be more knowledgeable.
2016-09-28 14:44:07	dcarmich	Here are my ipfw rules and netstat -r: http://pastebin.com/TCJFG87P
2016-09-28 14:45:01	@danhunsaker	wallbroken: If you need my attention specifically, it's OK to mention me.  Didn't mean to imply I don't want people talking to me ever.  Just that you risk only talking to me, and having others (who may know the answer faster) skip your comments because they're addressed to me specifically.  (Plus, if we're the only ones actively talking, there isn't really
2016-09-28 14:45:01	@danhunsaker	anyone else you'd be addressing anyway, so by default all your comments would be directed at me.)
2016-09-28 14:45:58	wallbroken	i was mentioning you just because to get you answer faster. that's all
2016-09-28 14:46:31	dcarmich	Any clues there?
2016-09-28 14:46:31		[14:46]
2016-09-28 14:48:08	@danhunsaker	wallbroken: While I understand that, it *is* a little rude...  :-\
2016-09-28 14:49:01	@danhunsaker	dcarmich: Your routes are ... unusual.  The fact 10.8.0.1 and 10.8.0.2 are both routed to the lo device is also unusual.
2016-09-28 14:49:57	@danhunsaker	The firewall rules don't seem to match up with the routes, either.  You have a route for 10.8.0.0/24, and a NAT rule for 10.8.0.0/16...
2016-09-28 14:50:49	dcarmich	My hosting provider has their backup server on 10.12.44.0, and in the default image added a static route to the 10.0.0.0 network with '10.12.44.225' ... should I remove that?
2016-09-28 14:50:55	dcarmich	(I'm not doing any routing-table stuff manually.)
2016-09-28 14:52:15	@danhunsaker	That one shouldn't be causing any issues, here, as the 10.8.0.0/24 is more specific.
2016-09-28 14:53:12	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 14:54:01	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 14:56:08	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 14:56:39	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 14:56:39	dcarmich	http://pastebin.com/tbdmw1MT
2016-09-28 14:56:42	dcarmich	Here's my openvpn.conf.
2016-09-28 15:02:00		[14:56]
2016-09-28 15:03:01	<--	dcarmich (~dcarmich@c-73-22-88-72.hsd1.il.comcast.net) has quit (Read error: Connection reset by peer)
2016-09-28 15:04:57	<--	shootbird (~quassel@beepbeep.serverpit.com) has quit (Ping timeout: 276 seconds)
2016-09-28 15:07:52	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 15:08:47	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 15:12:10	-->	shootbird (~quassel@beepbeep.serverpit.com) has joined #openvpn
2016-09-28 15:15:09	<--	Amplificator (~quassel@unaffiliated/amplificator) has quit (Quit: No Ping reply in 150 seconds.)
2016-09-28 15:16:22	-->	Amplificator (~quassel@unaffiliated/amplificator) has joined #openvpn
2016-09-28 15:17:05	-->	bytesandbolts (~bytesandb@host86-183-11-7.range86-183.btcentralplus.com) has joined #openvpn
2016-09-28 15:17:05		[15:17]
2016-09-28 15:17:19	<--	shootbird (~quassel@beepbeep.serverpit.com) has quit (Remote host closed the connection)
2016-09-28 15:17:40	-->	shootbird (~quassel@beepbeep.serverpit.com) has joined #openvpn
2016-09-28 15:21:02	-->	MikeDebian (~ML@a81-84-80-8.cpe.netcabo.pt) has joined #openvpn
2016-09-28 15:23:48	<--	shootbird (~quassel@beepbeep.serverpit.com) has quit (Ping timeout: 276 seconds)
2016-09-28 15:25:26	-->	dcarmich (~dcarmich@c-73-22-88-72.hsd1.il.comcast.net) has joined #openvpn
2016-09-28 15:25:29	dcarmich	back
2016-09-28 15:25:33	dcarmich	@danhunsaker.. sorry... Mac crashed.
2016-09-28 15:26:59	dcarmich	still here?
2016-09-28 15:27:43	@danhunsaker	I'd dial back your verbosity to no greater than 4.  5 is mostly extraneous unless your issue really requires something only visible there.  Also, all the 'push' lines will only work on the server side.
2016-09-28 15:28:12	@danhunsaker	And of course, as the /topic says, Patience is a virtue.  I don't live in IRC.  :P
2016-09-28 15:29:24	@danhunsaker	But yeah, if that's your server config, the 'push' lines seem OK.
2016-09-28 15:29:30	dcarmich	yep
2016-09-28 15:29:31	dcarmich	that's server.
2016-09-28 15:29:37	dcarmich	Any idea what could cause the routing-table issues?
2016-09-28 15:29:49	@danhunsaker	Any number of hundreds of things.
2016-09-28 15:29:58	-->	shootbird (~quassel@beepbeep.serverpit.com) has joined #openvpn
2016-09-28 15:30:58	@danhunsaker	I generally defer to dazo, ecrist, krzee, or rob0 (when he's around) for most issues, as they've been doing this a *lot* longer than I have.
2016-09-28 15:33:18	@danhunsaker	If you stick around for a while, one of them (or another knowledgeable user) can probably help you way better than I can.
2016-09-28 15:33:18		[15:33]
2016-09-28 15:33:32	@danhunsaker	I *can*, though, provide o little help...
2016-09-28 15:33:35	@danhunsaker	!flowcharts
2016-09-28 15:33:36	@vpnHelper	"flowcharts" is (#1) From !serverlan - http://pekster.sdf.org/misc/serverlan.png, or (#2) From !clientlan - http://pekster.sdf.org/misc/clientlan.png, or (#3) From !redirect - http://pekster.sdf.org/misc/redirect.png
2016-09-28 15:35:38	dcarmich	Those won't open.
2016-09-28 15:39:28	@danhunsaker	They've all loaded here...  You might need to try again in a bit.
2016-09-28 15:39:57	@danhunsaker	You won't need to follow all of them, but they walk through basic steps to get up and going in the three most common scenarios.
2016-09-28 15:40:26	@danhunsaker	(Or, well, rather they walk through troubleshooting steps for those scenarios.  See !howto for basic setup...)
2016-09-28 15:42:45	dcarmich	!howto
2016-09-28 15:42:46	@vpnHelper	"howto" is (#1) OpenVPN comes with a great howto, http://openvpn.net/howto PLEASE READ IT!, or (#2) http://www.secure-computing.net/openvpn/howto.php for a mirror, or (#3) Getting started with OpenVPN: https://community.openvpn.net/openvpn/wiki/GettingStartedwithOVPN
2016-09-28 15:43:04	dcarmich	What times are dazo/ecrist/krzee/rob0 usually available?
2016-09-28 15:48:25	@danhunsaker	The times vary by what else they're doing.
2016-09-28 15:48:25		[15:48]
2016-09-28 15:52:24	alyptik	dcarmich: i missed the first half of your problem
2016-09-28 15:52:32	alyptik	could you re ask it
2016-09-28 15:52:37	dcarmich	I've just updated my personal FreeBSD server from 10.3-RELEASE to 11.0-RELEASE, and every other service on it works fine other than my OpenVPN. The VPN connection is properly established from the endpoint to the server, but no traffic passes out of the server from the VPN client.
2016-09-28 15:52:45	dcarmich	Here are my ipfw rules and netstat -r: http://pastebin.com/TCJFG87P
2016-09-28 15:52:55	dcarmich	Here's my server-side openvpn.conf: http://pastebin.com/tbdmw1MT
2016-09-28 15:55:29	alyptik	can you ping IPs like 8.8.8.8? or complete lack of network
2016-09-28 15:56:07	dcarmich	complete lack of network.. the traffic hits the tun0 interface on the server side, but doesn't go out.
2016-09-28 15:56:21	alyptik	is 199.102.76.114 your server or client
2016-09-28 15:57:39	dcarmich	server
2016-09-28 15:57:57	alyptik	dcarmich: trying to get a picture of your network, actually pastebin ip addr on both server and client
2016-09-28 15:58:07	alyptik	`ip addr`*
2016-09-28 15:58:28	dcarmich	server: 199.102.76.114 ... client: an iPhone on a cellular network.
2016-09-28 15:58:33	alyptik	ah ok
2016-09-28 15:58:35	dcarmich	(or public wifi.)
2016-09-28 15:58:57	alyptik	can your client ping  199.102.76.114? and what is  199.102.76.113
2016-09-28 16:00:16	dcarmich	actually..
2016-09-28 16:00:23	dcarmich	113 is my server.
2016-09-28 16:00:38	alyptik	so what is 114?
2016-09-28 16:00:39	dcarmich	114 is my server.
2016-09-28 16:00:40	dcarmich	sorry..
2016-09-28 16:00:46	alyptik	so what is 113
2016-09-28 16:00:56	dcarmich	gateway on my hosting provider's net..
2016-09-28 16:01:15	alyptik	can you ping 114? and the route table you posted is your server right?
2016-09-28 16:01:21	<--	krzee (~k@openvpn/community/support/krzee) has quit (Ping timeout: 240 seconds)
2016-09-28 16:02:25	dcarmich	yep
2016-09-28 16:02:46	alyptik	any way to get route table of iphone? dont own one myself
2016-09-28 16:03:42	-->	chang (~vayne@pD9E44249.dip0.t-ipconnect.de) has joined #openvpn
2016-09-28 16:03:42		[16:03]
2016-09-28 16:04:03	dcarmich	no sadly.
2016-09-28 16:04:44	alyptik	hm well try pinging  199.102.76.114 or in some way connecting to a service running on that
2016-09-28 16:04:45	<--	pdobrogost_home (~quassel@77-255-246-50.adsl.inetia.pl) has quit (Ping timeout: 276 seconds)
2016-09-28 16:06:17	alyptik	i am trying to figure out if your default route is somehow broken
2016-09-28 16:06:49	dcarmich	tried to ping 10.8.0.1 or 10.8.0.2 from a test client...
2016-09-28 16:06:51	dcarmich	no ping.
2016-09-28 16:07:42	<--	yong (~vayne@pD9E44676.dip0.t-ipconnect.de) has quit (Ping timeout: 264 seconds)
2016-09-28 16:08:14	alyptik	seems that is it, try push "redirect-gateway def1" instead of bypass-dhcp
2016-09-28 16:10:06	alyptik	also try adding 'push "route 10.8.0.0 255.255.0.0"' if that fails
2016-09-28 16:15:27	-->	pdobrogost_home (~quassel@87.205.145.84) has joined #openvpn
2016-09-28 16:20:48	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 16:20:48		[16:20]
2016-09-28 16:21:19	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 16:23:57	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 16:24:26	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 16:27:25	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 16:27:28	dcarmich	I eill try thT
2016-09-28 16:27:32	dcarmich	will try that
2016-09-28 16:27:41	dcarmich	thanks
2016-09-28 16:27:52	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 16:33:00		[16:27]
2016-09-28 16:34:51	alyptik	yup
2016-09-28 16:40:00		[16:34]
2016-09-28 16:51:31	<--	MikeDebian (~ML@a81-84-80-8.cpe.netcabo.pt) has quit (Quit: Leaving)
2016-09-28 16:54:01	<--	chachasmooth (~chachasmo@unaffiliated/chachasmooth) has quit (Ping timeout: 240 seconds)
2016-09-28 16:56:43	-->	chachasmooth (~chachasmo@unaffiliated/chachasmooth) has joined #openvpn
2016-09-28 16:56:43		[16:56]
2016-09-28 17:00:15	-->	yong (~vayne@pD9E45367.dip0.t-ipconnect.de) has joined #openvpn
2016-09-28 17:01:32	<--	yong (~vayne@pD9E45367.dip0.t-ipconnect.de) has quit (Remote host closed the connection)
2016-09-28 17:01:57	<--	fp7 (~fp7@unaffiliated/fp7) has quit (Ping timeout: 276 seconds)
2016-09-28 17:02:54	<--	chang (~vayne@pD9E44249.dip0.t-ipconnect.de) has quit (Ping timeout: 264 seconds)
2016-09-28 17:04:01	<--	shootbird (~quassel@beepbeep.serverpit.com) has quit (Ping timeout: 240 seconds)
2016-09-28 17:08:48	-->	shootbird (~quassel@beepbeep.serverpit.com) has joined #openvpn
2016-09-28 17:14:00		[17:08]
2016-09-28 17:14:57	-->	fp7 (~fp7@unaffiliated/fp7) has joined #openvpn
2016-09-28 17:20:00		[17:14]
2016-09-28 17:23:10	-->	krzee (9467285c@openvpn/community/support/krzee) has joined #openvpn
2016-09-28 17:23:10	--	Mode #openvpn [+o krzee] by ChanServ
2016-09-28 17:23:27	@krzee	my screen is down for a few but i saw someone was looking for me
2016-09-28 17:23:47	@krzee	dcarmich: did you get your problem fixed?
2016-09-28 17:25:03	@krzee	whoa the flowcharts are down too? i wonder if theres a major outage
2016-09-28 17:25:11	@krzee	!flowcharts
2016-09-28 17:25:12	@vpnHelper	"flowcharts" is (#1) From !serverlan - http://pekster.sdf.org/misc/serverlan.png, or (#2) From !clientlan - http://pekster.sdf.org/misc/clientlan.png, or (#3) From !redirect - http://pekster.sdf.org/misc/redirect.png
2016-09-28 17:25:24	@krzee	oh damn, i thought i put the mirrors there
2016-09-28 17:25:37	@krzee	!forget flowcharts *
2016-09-28 17:25:37	@vpnHelper	Joo got it.
2016-09-28 17:25:58	@krzee	!learn flowcharts from !serverlan http://www.ircpimps.org/serverlan.png
2016-09-28 17:25:59	@vpnHelper	(learn [<channel>] <key> as <value>) -- Associates <key> with <value>. <channel> is only necessary if the message isn't sent on the channel itself. The word 'as' is necessary to separate the key from the value. It can be changed to another word via the learnSeparator registry value.
2016-09-28 17:26:04	@krzee	!learn flowcharts as from !serverlan http://www.ircpimps.org/serverlan.png
2016-09-28 17:26:04	@vpnHelper	Joo got it.
2016-09-28 17:26:16	@krzee	!learn flowcharts as from !clientlan http://www.ircpimps.org/clientlan.png
2016-09-28 17:26:16	@vpnHelper	Joo got it.
2016-09-28 17:26:34	@krzee	!learn flowcharts as from !redirect http://www.ircpimps.org/redirect.png
2016-09-28 17:26:34	@vpnHelper	Joo got it.
2016-09-28 17:26:57	@krzee	and actually, those are the orig links, my server was down for a year or so... so i removed them
2016-09-28 17:32:00		[17:26]
2016-09-28 17:35:47	<--	fengshaun (~fengshaun@unaffiliated/fengshaun) has quit (Ping timeout: 272 seconds)
2016-09-28 17:37:44	-->	fengshaun (~fengshaun@unaffiliated/fengshaun) has joined #openvpn
2016-09-28 17:39:19	@krzee	dcarmich: last chance before i put the laptop away for the night...
2016-09-28 17:39:35	@krzee	(or anyone else?)
2016-09-28 17:39:44	Eugene	krzee - Bongs
2016-09-28 17:39:52	@krzee	ooo good idea bro!
2016-09-28 17:39:57	@krzee	dab time!
2016-09-28 17:40:09	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 17:40:17	Eugene	Fuck I love Seattle
2016-09-28 17:40:36	@krzee	nice
2016-09-28 17:40:41	@krzee	legal weeds
2016-09-28 17:40:46	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 17:41:03	Eugene	They're not fucking around either.
2016-09-28 17:41:15	@krzee	im orig from california ;]
2016-09-28 17:43:20	@krzee	lets go take a dab together, im bringing the laptop
2016-09-28 17:43:49	Eugene	Working on it. Gotta clean the vape
2016-09-28 17:44:00	@krzee	but i have to leave you on my pool table, otherwise ill lose wifi signal
2016-09-28 17:46:00	-->	barajasfab (~fabian@2605:e000:151f:28b:4159:550d:7481:e3bd) has joined #openvpn
2016-09-28 17:46:29	<--	omnidan (~omnidan@touchlay/founder/omnidan) has quit (Ping timeout: 250 seconds)
2016-09-28 17:46:49	<--	DzAirmaX (~AirmaX@unaffiliated/dzairmax) has quit (Ping timeout: 248 seconds)
2016-09-28 17:47:12	<--	shootbird (~quassel@beepbeep.serverpit.com) has quit (Ping timeout: 272 seconds)
2016-09-28 17:47:12		[17:47]
2016-09-28 17:47:49	-->	DzAirmaX (~AirmaX@unaffiliated/dzairmax) has joined #openvpn
2016-09-28 17:48:27	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Ping timeout: 272 seconds)
2016-09-28 17:48:28	<--	WebDawg (~webdawg@officialg0d.com) has quit (Ping timeout: 272 seconds)
2016-09-28 17:48:33	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 17:50:01	-->	WebDawg (~webdawg@officialg0d.com) has joined #openvpn
2016-09-28 17:50:13	dcarmich	@krzee.. no..
2016-09-28 17:50:27	@krzee	werd
2016-09-28 17:50:37	@krzee	good thing Eugene kept me here taking dabs!
2016-09-28 17:50:44	Eugene	What
2016-09-28 17:50:49	@krzee	dcarmich: wanna tell me the problem? i didnt see much of the scrol
2016-09-28 17:50:55	@krzee	scroll*
2016-09-28 17:51:00	<--	pppingme (~pppingme@unaffiliated/pppingme) has quit (Ping timeout: 272 seconds)
2016-09-28 17:51:04	dcarmich	I've just updated my personal FreeBSD server from 10.3-RELEASE to 11.0-RELEASE, and every other service on it works fine other than my OpenVPN. The VPN connection is properly established from the endpoint to the server, but no traffic passes out of the server from the VPN client.
2016-09-28 17:51:08	dcarmich	Here are my ipfw rules and netstat -r: http://pastebin.com/TCJFG87P
2016-09-28 17:51:19	dcarmich	Server-side openvpn.conf: http://pastebin.com/tbdmw1MT
2016-09-28 17:51:33	@krzee	oh werd you were here last night
2016-09-28 17:51:55	<--	wallbroken (~wallbroke@unaffiliated/wallbroken) has quit (Read error: Connection reset by peer)
2016-09-28 17:51:56	@krzee	can you ping the servers vpn ip from the client?
2016-09-28 17:52:09	-->	shootbird (~quassel@beepbeep.serverpit.com) has joined #openvpn
2016-09-28 17:52:37	-->	wallbroken (~wallbroke@unaffiliated/wallbroken) has joined #openvpn
2016-09-28 17:52:59	<--	Rockwolf (~Rockwolf@Sentinelnet.tk) has quit (Ping timeout: 250 seconds)
2016-09-28 17:54:42	dcarmich	can't..
2016-09-28 17:54:44	-->	omnidan (~omnidan@touchlay/founder/omnidan) has joined #openvpn
2016-09-28 17:55:06	-->	Rockwolf (~Rockwolf@Sentinelnet.tk) has joined #openvpn
2016-09-28 17:56:16	@krzee	in your firewall try adding rules to allow traffic in and out of tun0
2016-09-28 17:58:23	@krzee	i must admit i havent seen an ipfw ruleset since the 90s
2016-09-28 17:59:08	@krzee	01007  52034 14864742 nat 1 ip from any to any in via xn0     <--- whats that?
2016-09-28 18:01:06	dcarmich	Had to put that in so the traffic coming *back* can get to the server.
2016-09-28 18:01:43	<--	barajasfab (~fabian@2605:e000:151f:28b:4159:550d:7481:e3bd) has quit (Quit: Ex-Chat)
2016-09-28 18:01:54	@krzee	ipfw doesnt keep state when it nats out?
2016-09-28 18:02:51	@krzee	https://forums.freebsd.org/threads/46929/ looks like it does
2016-09-28 18:02:51		[18:02]
2016-09-28 18:02:52	@vpnHelper	Title: IPFW NAT setting | The FreeBSD Forums (at forums.freebsd.org)
2016-09-28 18:03:22	<--	Abbott (~Abbott@unaffiliated/abbott) has left #openvpn ("WeeChat 1.3")
2016-09-28 18:03:26	dcarmich	I see.. so add 'keep-state' after the nat 1 out rule?
2016-09-28 18:03:32	@krzee	well first
2016-09-28 18:03:41	@krzee	get rid of that rule, then see if you can ping the vpn server ip
2016-09-28 18:05:58	@krzee	(after reconnecting the vpn of course)
2016-09-28 18:08:21	<--	bytesandbolts (~bytesandb@host86-183-11-7.range86-183.btcentralplus.com) has quit (Ping timeout: 240 seconds)
2016-09-28 18:08:51	dcarmich	nope
2016-09-28 18:08:54	@krzee	dcarmich: is this freebsd server a gateway for a lan?
2016-09-28 18:09:06	@krzee	does it use nat besides for the vpn?
2016-09-28 18:09:23	dcarmich	No.. it's a VPS server sitting in a hosting datacenter... use case is a mobile device on public wifi --> connect to it --> secures the traffic against snooping.
2016-09-28 18:09:24	@krzee	did you add the rules i said for tun0 in and out allow?
2016-09-28 18:12:27	@krzee	if not, do that, then test it again, and if you still cant ping the vpn server ip repost the firewall rules
2016-09-28 18:12:41	dcarmich	I added 'allow ip from any to any via tun0'
2016-09-28 18:13:05	-->	rustic (~rustic@144.202.228.211) has joined #openvpn
2016-09-28 18:13:45	rustic	!welcome
2016-09-28 18:13:46	@vpnHelper	"welcome" is (#1) Start by stating your !goal, such as 'I would like to access the internet over my vpn', or (#2) New to IRC? see the link in !ask, or (#3) We may need you to !paste your !logs and !configs and maybe !interface to help you, or (#4) See !howto for beginners, or (#5) See !route for lans behind openvpn, or (#6) !redirect for sending inet traffic through the server, or (#7) Also
2016-09-28 18:13:47	@vpnHelper	interesting: !man !/30 !topology !iporder !sample !forum !wiki !mitm, or (#8) Don't use 192.168.1.0/24 or 192.168.0.0/24 (too much potential for conflict), or (#9) And again, if you think you need !tap, you're probably wrong
2016-09-28 18:14:12	dcarmich	!redirect
2016-09-28 18:14:13	@vpnHelper	"redirect" is (#1) to make all inet traffic flow through the vpn, you will need --redirect-gateway (see !def1), as well as IP forwarding (see !ipforward) and NAT (see !nat) enabled on the server., or (#2) you may need to use a different dns server when redirecting gateway, see !dns or !pushdns, or (#3) if using ipv6 try: route-ipv6 2000::/3, or (#4) Handy troubleshooting flowchart:
2016-09-28 18:14:15	@vpnHelper	http://pekster.sdf.org/misc/redirect.png
2016-09-28 18:14:43	@krzee	dcarmich: i made the flowcharts, keep working with me here =]
2016-09-28 18:15:11	@krzee	i feel like you have something blocking the vpn, show me the logs from both sides with verb 5 and we'll confirm that
2016-09-28 18:16:59	rustic	!goal I would like to vpn my irssi traffic but not the rest of my traffic in an lxc container
2016-09-28 18:17:56	@krzee	rustic: do you know the servers you will connect to using irssi?
2016-09-28 18:17:56		[18:17]
2016-09-28 18:18:26	@krzee	because openvpn doesnt work by app, but it works by routing table, so you can have it only route traffic to the irc servers over the vpn
2016-09-28 18:19:04	rustic	cool
2016-09-28 18:19:16	@krzee	of course you can do a very advanced setup and actually do it by app
2016-09-28 18:19:32	rustic	the irc servers may change but I could make an irssi plugin to set router if you point me at documentation for how to do it
2016-09-28 18:19:43	@krzee	in that case you would add a second routing table, then in your firewall you would mark packets as they go out to hit the other routing table
2016-09-28 18:19:43	rustic	I did try an advanced setup but lxc containers don't like to set namespaces
2016-09-28 18:20:11	rustic	i would be more interested in your second solution
2016-09-28 18:20:25	@krzee	!lart
2016-09-28 18:20:36	@krzee	!factoids search --values lart
2016-09-28 18:20:36	@vpnHelper	'lartc', 'routebyapp', and 'redirect-policy'
2016-09-28 18:20:39	@krzee	!lartc
2016-09-28 18:20:40	@vpnHelper	"lartc" is (#1) LARTC is the de-facto guide to policy routing and QoS (tc, or traffic control) on Linux. http://lartc.org/howto/ . Policy routing in Ch. 4, QoS in Ch. 9. Start at the beginning if you're new to advanced routing on Linux, or (#2) there is also a writeup on policy routing at https://community.openvpn.net/openvpn/wiki/Concepts-PolicyRouting-Linux
2016-09-28 18:20:57	@krzee	but its way easier to just add some routes
2016-09-28 18:21:07	rustic	can you show me that documentation as well
2016-09-28 18:21:18	rustic	did i mention how much you rock?
2016-09-28 18:21:35	@krzee	in which case you would treat it like a !redirect setup, but dont add --redirect-gateway, instead just add --route <ip_of_ircserver> 255.255.255.255
2016-09-28 18:22:01	@krzee	which you can add many of
2016-09-28 18:22:15	rustic	would that require restarting the instance of openvpn everytime i add a server or can it rehash the config?
2016-09-28 18:22:27	dcarmich	@krzee: Here's the OpenVPN server log at verb 5: http://pastebin.com/b3auMWgH
2016-09-28 18:22:35	@krzee	well you could just add the route manually too
2016-09-28 18:22:51	@krzee	you dont NEED openvpn to add the route at all
2016-09-28 18:22:57	@krzee	but it will if you ask it to
2016-09-28 18:23:10	@krzee	dcarmich: and client log?
2016-09-28 18:23:28	rustic	oh cool. if you could show me an example of that route command i will be on my way and read man pages
2016-09-28 18:23:40	@krzee	you mean the route command in linux?
2016-09-28 18:24:01	rustic	ahh
2016-09-28 18:24:18	rustic	thank you for your time
2016-09-28 18:24:24	@krzee	you're welcome
2016-09-28 18:24:37	@krzee	oh and actually its ip route add
2016-09-28 18:24:39	@krzee	in linux
2016-09-28 18:25:02	@krzee	rob0 and Eugene wouldnt like me using the route command in linux
2016-09-28 18:25:05	dcarmich	client log: http://pastebin.com/WxCJtY4Z
2016-09-28 18:25:07	@krzee	:D
2016-09-28 18:25:14	Eugene	Eh, your system. Fuck it up how you like.
2016-09-28 18:25:20	dcarmich	(Using Viscosity in a test OS X VM: https://www.sparklabs.com/viscosity/)
2016-09-28 18:25:21	@vpnHelper	Title: Viscosity - OpenVPN Client for Mac & Windows (at www.sparklabs.com)
2016-09-28 18:26:44	@krzee	dcarmich: you didnt have verb 5 on client
2016-09-28 18:27:29	@krzee	oh dude
2016-09-28 18:27:33	@krzee	show me your client config
2016-09-28 18:27:53	<--	Poster (~poster@cpe-74-140-88-211.columbus.res.rr.com) has quit (Quit: sometimes, i have everything- yet i wish i felt something)
2016-09-28 18:28:56	dcarmich	Viscosity logs at verb 5: http://pastebin.com/bNd0bk9s
2016-09-28 18:31:00	<--	ShadniX (dagger@p5481C8E5.dip0.t-ipconnect.de) has quit (Ping timeout: 276 seconds)
2016-09-28 18:31:15	@krzee	found it
2016-09-28 18:31:26	@krzee	viscosity is enabling compression
2016-09-28 18:31:33	@krzee	but your server doesnt have it enabled
2016-09-28 18:32:41	@krzee	red herring on the server update, you also changed clients i bet ;]
2016-09-28 18:34:44	dcarmich	yeah.. always update the app on the app store with the iPhone.. just using Viscosity as a desktop "tester".
2016-09-28 18:34:44		[18:34]
2016-09-28 18:36:23	dcarmich	But even with comp-lzo enabled on both sides, still can't ping the server IP.
2016-09-28 18:37:41	-->	ShadniX (dagger@p5481C1C0.dip0.t-ipconnect.de) has joined #openvpn
2016-09-28 18:39:12	<--	krzee (9467285c@openvpn/community/support/krzee) has quit (Ping timeout: 240 seconds)
2016-09-28 18:44:18	-->	krzie (9467285c@openvpn/community/support/krzee) has joined #openvpn
2016-09-28 18:44:18	--	Mode #openvpn [+o krzie] by ChanServ
2016-09-28 18:44:22	--	krzie is now known as krzee
2016-09-28 18:44:40	@krzee	[21:34] <dcarmich> yeah.. always update the app on the app store with the iPhone.. just using Viscosity as a desktop "tester". [21:35] <@krzee> so now that you either enabled compression on the server, or disabled it on the client, can you connect and ping the vpn server ip?
2016-09-28 18:44:49	@krzee	thats the last stuff i saw
2016-09-28 18:45:54	dcarmich	I enabled compression on *both* sides, and I can connect fine.. but no ping.
2016-09-28 18:47:11	@krzee	show me both new logs with verb 5
2016-09-28 18:47:38	@krzee	and i want you to try the ping while getting the logs
2016-09-28 18:47:52	@krzee	because verb 5 adds WRWRWR stuff that i want to see
2016-09-28 18:53:00		[18:47]
2016-09-28 18:55:25	-->	Poster (~poster@cpe-74-140-88-211.columbus.res.rr.com) has joined #openvpn
2016-09-28 18:56:35	@krzee	!ping
2016-09-28 18:56:35	@vpnHelper	pong
2016-09-28 18:56:39	Eugene	Dong
2016-09-28 18:59:01	<--	AlexRussia (~Alex@unaffiliated/alexrussia) has quit (Ping timeout: 240 seconds)
2016-09-28 19:02:24	dcarmich	Server log at verb 5: http://pastebin.com/ks1AwezN
2016-09-28 19:02:43	@krzee	and client
2016-09-28 19:03:33	@krzee	and it is 10.8.0.1 that you are trying to ping from the client, right?
2016-09-28 19:04:35	dcarmich	yes.
2016-09-28 19:04:39	dcarmich	and the client: http://pastebin.com/MQBY8NgN
2016-09-28 19:04:44	dcarmich	Plenty of WRWRs in the server log.
2016-09-28 19:09:27	@krzee	can you try tunnelblick instead?
2016-09-28 19:09:27		[19:09]
2016-09-28 19:10:12	@krzee	and try commenting those 4 sndbuf rcvbuf lines in your server config
2016-09-28 19:10:50	@krzee	add net 10.8.0.0: gateway 10.8.0.1 fib 0: route already in table
2016-09-28 19:10:52	@krzee	whoa
2016-09-28 19:11:03	@krzee	that makes it seem like you're already running openvpn
2016-09-28 19:11:30	@krzee	can you also check if you have more than 1 instance running
2016-09-28 19:14:00	<--	fp7 (~fp7@unaffiliated/fp7) has quit (Remote host closed the connection)
2016-09-28 19:14:51	@krzee	whoa and also you have cipher AES-128-CBC   # AES but in BOTH your logs it says blowfish
2016-09-28 19:15:32	@krzee	so i dont even believe you're showing me logs that match your configs
2016-09-28 19:15:58	@krzee	Thu Sep 29 00:51:11 2016 us=286540 73.22.88.72:27876 Data Channel Decrypt: Cipher 'BF-CBC' initialized with 128 bit key
2016-09-28 19:21:00		[19:15]
2016-09-28 19:21:53	dcarmich	Changed it to BF because viscosity didn't have AES.
2016-09-28 19:24:07	@krzee	lol viscosity seems to suck switch to tunnelblick
2016-09-28 19:24:22	@krzee	i never tried viscosity when i used osx, but tunnelblick worked nice
2016-09-28 19:30:00		[19:24]
2016-09-28 19:35:30	dcarmich	When I ping the VPN-connected host from the server.. I see '36 bytes from localhost ... redirect host, new addr: 10.8.0.1)'
2016-09-28 19:35:36	dcarmich	src: 127.0.0.1 dst: 10.8.0.4
2016-09-28 19:36:17	@krzee	are you using tunnelblick?
2016-09-28 19:36:48	@krzee	because i already found 2 problems that came from viscosity changing stuff on you
2016-09-28 19:37:21	@krzee	im unwilling to troubleshoot your viscosity setup further, use tunnelblick or openvpn from commandline
2016-09-28 19:37:26	dcarmich	using tunnelblick.
2016-09-28 19:37:57	@krzee	ok, then fresh logs and configs please
2016-09-28 19:38:18	@krzee	you wouldnt think i needed new configs, but you changed ciphers without telling me, so i cant trust the old configs
2016-09-28 19:40:29	dcarmich	Tunnelblick Client Config: https://paste.ee/p/pzmgi
2016-09-28 19:41:04	@krzee	!configs
2016-09-28 19:41:05	@vpnHelper	"configs" is (#1) please !paste your client and server configs (with comments removed, you can use `grep -vE '^#|^;|^$' server.conf`), also include which OS and ovpn version, or (#2) dont forget to include any ccd entries, or (#3) pfSense, see http://www.secure-computing.net/wiki/index.php/OpenVPN/pfSense to obtain your config, or (#4) remove inline private key or tls-auth key before posting
2016-09-28 19:41:22	@krzee	(with comments removed, you can use `grep -vE '^#|^;|^$' server.conf`)
2016-09-28 19:43:53	dcarmich	Server config (comments removed): https://paste.ee/p/eddV2
2016-09-28 19:44:18	dcarmich	Client config (comments removed): https://paste.ee/p/Oodh1
2016-09-28 19:48:00	@krzee	https://paste.ee/p/9e24H
2016-09-28 19:48:00		[19:48]
2016-09-28 19:48:46	@krzee	try that, ping 10.8.0.1 from the client after connecting, and then show me the logs from both sides
2016-09-28 19:54:00		[19:48]
2016-09-28 19:55:35	@krzee	unless the ping works, in which case say so and we'll continue from there
2016-09-28 19:57:12	dcarmich	yes
2016-09-28 19:57:13	dcarmich	the ping worked
2016-09-28 19:57:42	dcarmich	(With the commented-out bits.)
2016-09-28 19:58:11	@krzee	ok great
2016-09-28 19:58:59	@krzee	now show me the up and down scripts
2016-09-28 19:59:16	@krzee	then ill give you another config to try
2016-09-28 19:59:59	@krzee	i like that paste.ee
2016-09-28 20:00:04	@krzee	!paste
2016-09-28 20:00:05	@vpnHelper	"paste" is "pastebin" is (#1) please paste anything with more than 5 lines into a pastebin site or (#2) https://gist.github.com is recommended for fewest ads; try fpaste.org or paste.kde.org as backups or (#3) If you're pasting config files, see !configs for grep syntax to remove comments or (#4) gist allows multiple files per paste, useful if you have several files to show
2016-09-28 20:00:25	@krzee	!learn paste as paste.ee is also nice
2016-09-28 20:00:25	@vpnHelper	Joo got it.
2016-09-28 20:01:07	dcarmich	VPN up-down scripts: https://paste.ee/p/EKQ7v
2016-09-28 20:01:30	@krzee	oh ok cool
2016-09-28 20:02:32	@krzee	may i make an unrelated suggestion?
2016-09-28 20:03:21	@krzee	i think it's always best to put redirect-gateway in the client configs instead of the server config, because then each client can choose for themselves
2016-09-28 20:03:31	@krzee	since you're currently your only client, doesnt matter
2016-09-28 20:03:40	dcarmich	I see.
2016-09-28 20:04:01	@krzee	https://paste.ee/p/0vjVx    <--- try that
2016-09-28 20:04:03	@krzee	same ping test
2016-09-28 20:07:10	dcarmich	Just doing it.. ping 10.8.0.1 works.
2016-09-28 20:08:12	@krzee	ok so now, does it with if you uncomment those 4 sndbuf rcvbuf lines?
2016-09-28 20:08:21	@krzee	s/with/work/
2016-09-28 20:08:43	<--	shio (~shio@158.121.101.84.rev.sfr.net) has quit (Ping timeout: 244 seconds)
2016-09-28 20:09:18	dcarmich	yes
2016-09-28 20:09:18		[20:09]
2016-09-28 20:09:31	@krzee	lol it was just viscosity
2016-09-28 20:09:57	@krzee	i guess you can put your nat rule back if it was working before
2016-09-28 20:10:09	@krzee	but i also think you can just keepstate
2016-09-28 20:10:39	@krzee	up to you
2016-09-28 20:12:10	-->	shio (~shio@158.121.101.84.rev.sfr.net) has joined #openvpn
2016-09-28 20:12:34	@krzee	!viscosity
2016-09-28 20:13:03	@krzee	!learn viscosity as save yourself 4 hours of troubleshooting broken connections and just use tunnelblick! :-p
2016-09-28 20:13:03	@vpnHelper	Joo got it.
2016-09-28 20:14:00	@krzee	!forget viscosity
2016-09-28 20:14:01	@vpnHelper	Joo got it.
2016-09-28 20:14:10	@krzee	!learn viscosity as save yourself 4 hours of troubleshooting broken connections (and $9) and just use tunnelblick! :-p
2016-09-28 20:14:11	@vpnHelper	Joo got it.
2016-09-28 20:14:46	-->	elastix (~Thunderbi@cpc85186-haye23-2-0-cust65.17-4.cable.virginm.net) has joined #openvpn
2016-09-28 20:15:35	@krzee	dcarmich: go ahead and put your cipher back to how you want it, keep it matching on both sides
2016-09-28 20:15:59	@krzee	also test if everything works how you want it when you finish getting it set how you want
2016-09-28 20:18:15	-->	ShapeShifter499 (~ShapeShif@unaffiliated/shapeshifter499) has joined #openvpn
2016-09-28 20:18:46	<--	ShapeShifter499 (~ShapeShif@unaffiliated/shapeshifter499) has quit (Max SendQ exceeded)
2016-09-28 20:19:13	-->	ShapeShifter499 (~ShapeShif@unaffiliated/shapeshifter499) has joined #openvpn
